


<!--START SELECT PRE-POP-->
<script type="text/javascript">
$(document).ready(function () {

alert("Pre-pop selects ran");

  // 0: Field ID | 1: Marketo Token
  var arrayPrepopSelect = [
    [document.getElementById('Marketing_Country__c'), "{{lead.Marketing Country}}"],
    [document.getElementById('Title_Category__c'), "{{lead.Title Category}}"],
    [document.getElementById('Job_Function__c'), "{{lead.Job Function}}"],
    [document.getElementById('Marketing_Automation__c'), "{{lead.Marketing Automation}}"],
    [document.getElementById('Business_Type__c'), "{{lead.Business Type}}"]
  ]

  for (var i = 0; i < arrayPrepopSelect.length; i++) { //Loop through the number of fields defined above
    for (var x=0; x<arrayPrepopSelect[i][0].length; x++) { //Loop through the number of options in the drop down
      if (arrayPrepopSelect[i][1]==arrayPrepopSelect[i][0].options[x].value) {
        arrayPrepopSelect[i][0].value = arrayPrepopSelect[i][1];
        break;
      }
    }
  }


  var userJobFunction = document.getElementById('Job_Function__c').value;
  var listJobFunction = ["Marketing","Sales","Finance","Accounting","Purchasing"];

  if( $.inArray(userJobFunction, listJobFunction) != -1){
    populateJobRoleOptions();
    alert("Populate Job Role Options");
  }

});


</script>
<!--END SELECT PRE-POP-->

<!--START HIDE NEWSLETTER OPTION FOR SUBSCRIBERS-->
<script type="text/javascript">
var newsletterValue = "{{lead.Subscribed to Newsletter}}"; //= ""; //

if (newsletterValue !== "1") {
  document.getElementById('newsletter-wrapper').style.display = "";
}

</script>
<!--END HIDE NEWSLETTER OPTION FOR SUBSCRIBERS-->

<!--START SHOW/HIDE PRE-POPULATED FORM FIELDS-->
<script type="text/javascript">
  var fieldFirstName = document.getElementById('FirstName');
  var fieldLastName = document.getElementById('LastName');
  var fieldPhone = document.getElementById('Phone');
  var fieldCompany = document.getElementById('Company');
  var fieldMarketingCountry = document.getElementById('Marketing_Country__c');
  var fieldTitleCategory = document.getElementById('Title_Category__c');
  var fieldJobFuntion = document.getElementById('Job_Function__c');
  var fieldJobRole = document.getElementById('Job_Role__c');
  var fieldMarketingAutomation = document.getElementById('Marketing_Automation__c');
  var fieldBusinessType = document.getElementById('Business_Type__c');

  //Fade Out (Hide) Form Fields
  function hideKnownFields() {

    var myVariableArray = [fieldFirstName, fieldLastName, fieldPhone, fieldCompany, fieldTitleCategory, fieldJobFuntion, fieldJobRole, fieldMarketingAutomation, fieldBusinessType];

    var arrayLength = myVariableArray.length;

    for (var i = 0; i < arrayLength; i++) {
      if ((myVariableArray[i].value) !== '') {
        $(myVariableArray[i]).parents('div').eq(1).fadeOut();
        $(myVariableArray[i]).addClass("ignore");
      }
    }

  }

  //Fade In (Show) Form Fields
  function showAllFields() {

    var myVariableArray2 = [fieldFirstName, fieldLastName, fieldPhone, fieldCompany, fieldTitleCategory, fieldJobFuntion, fieldJobRole, fieldMarketingAutomation, fieldBusinessType];

    var arrayLength2 = myVariableArray2.length;

    for (var i = 0; i < arrayLength2; i++) {
      $(myVariableArray2[i]).parents('div').eq(1).fadeIn();
      $(myVariableArray2[i]).removeClass("ignore");
    }

  }

</script>
<!--END SHOW/HIDE PRE-POPULATED FORM FIELDS-->


<script>
//Privacy Policy Show/Hide
$(document).ready(function () {

  function checkForExpressCountry() {

    userMarktingCountry = document.getElementById('Marketing_Country__c').value;
    listExpressCountry = ["Canada","Germany","Australia"];
    var wrapperPrivacyStatement = document.getElementById('privacy-statement');

    if( $.inArray(userMarktingCountry, listExpressCountry) != -1){
        $(wrapperPrivacyStatement).fadeIn();
        return true;
    } else {
        $(wrapperPrivacyStatement).fadeOut();
        return false;
    }
  }

    $(document).ready(checkForExpressCountry);
    $("[id=Marketing_Country__c]").change(checkForExpressCountry);

});
</script>


<script>
//START VALIDATION CONFIG + REMOVE COOKIES ON SUBMIT

$("#kapostmktoform").validate({

  ignore: ".ignore",
  rules: {
    FirstName: {required: true},
    LastName: {required: true},
    Email: {required: true, email: true},
    Phone: {required: true},
    Company: {required: true},
    Marketing_Country__c: {required: true},
    Title_Category__c: {required: true},
    Job_Function__c: {required: true},
    Job_Role__c:
    { required:
      { depends:
        function () { //Start Function

          var userJobFunction = document.getElementById('Job_Function__c').value;
          var listJobFunction = ["Marketing","Sales","Finance","Accounting","Purchasing"];

          if( $.inArray(userJobFunction, listJobFunction) != -1){
            return true;
          } else {
            return false;
          }

        } //End Function
      } //End Depends
    }, //End Required
    Marketing_Automation__c: {required: true},
    Business_Type__c: {required: true},
    legalCheckbox:
    { required:
      { depends:
        function () { //Start Function

          if( $.inArray(userMarktingCountry, listExpressCountry) != -1){
              return true;
          } else {
              return false;
          }

        } //End Function
      } //End Depends
    } //End Required
  }, //End Rules

  submitHandler: function($form) {
    Cookies.remove('kapostsearch', { domain: 'kapost.com' });
    Cookies.remove('kapostsocial', { domain: 'kapost.com' });
    Cookies.remove('kapostsource', { domain: 'kapost.com' });
    Cookies.remove('kapostpaid', { domain: 'kapost.com' });
    Cookies.remove('kapostsearch');
    Cookies.remove('kapostsocial');
    Cookies.remove('kapostsource');
    Cookies.remove('kapostpaid');
    alert("submit hander function ran");
    form.submit();
  }

}); //End .validate


</script>
